# MCM results

Now that we have successfully fitted our model, it is time to work with the results. For the purposes of this wiki we will continue where we left off in the previous section, in short:

```   
my_model <- MCMmodel(dataset, n_latent=2, constrained_a=FALSE, scale_data=FALSE)
my_model <- MCMedit(my_model, "A", c("a1_4", "a1_5", "a2_2", "a2_3"), 0)
my_result <- MCMfit(my_model, data)
```

## MCM result

The resulting MCM result object displays the estimates when printed.
``` 
    a1_1 a1_2 a1_3 a2_4 a2_5 b1_2 b1_3 b1_4  b1_5  b2_1 b2_3 ...
est 0.63 0.53 0.48 0.47 0.49 0.27 0.02 0.20 -0.02 -0.04 0.33 ...
se  0.01 0.02 0.02 0.10 0.11 0.02 0.00 0.01  0.01  0.01 0.01 ...
```
Though this makes it look like a dataframe, it is in fact a custom object. If you want to continue working with this dataframe yourself you can obtain it via
``` 
my_result_df <- as.data.frame(my_result)
```
### Visualization

Similar to the base MCM model, you can now generate a qgraph of your result with path weights:
``` 
plot(my_result)
```

![Figure 4](https://raw.githubusercontent.com/zenabtamimy/MCMSEM/dev-torch/imgs/4.Figure1.svg)

You can customize the layout of this plot via the included `layout` argument, or pass additional arguments to `plot` as they are passed to `qraph` see [qgraph documentation](https://cran.r-project.org/web/packages/qgraph/qgraph.pdf#page=28) for more information.

### Advanced
In addition to this dataframe the MCM result object contains the following:
 - `my_result$history$loss`: Loss history of optimization (this includes bounds scaling if `use_bounds` was set to `TRUE`)
 - `my_result$history$Mxobs`: Observed co-moment matrix: M2, M3 or M4
 - `my_result$history$Mxobs`: Observed co-moment matrix: M2, M3 or M4
 - `my_result$loss`: Final loss (this does **not** include bounds scaling)
 - `my_result$info`: List of MCMSEM version and arguments used
 - `my_reulst$model`: Deep copy of the model used for this result object
 - `my_result$runtimes`: Runtimes of preparation, optimizer, SE, and total runtime

## MCM summary

In addition to the raw result you can use the `summary` function to obtain more information about the parameters, and the model:
```
result_summary <- summary(my_result)
print(result_summary)
```

Which will print the following:
```
|--------------------------------------|
|  MCM Result Summary (MCMSEM v0.7.3)  |
|--------------------------------------|
device         : cpu
N phenotypes   : 5
N latents      : 2
N observations : 250000
N parameters   : 40
SE type        : asymptotic

Fit statistics
loss  : 0.00128520978614688
chisq : 321.30244653672
bic   : 818.471094410495

Parameters summary
   label lhs edge rhs          est          se             p group fixed
1   a1_1  f1   =~  x1  0.627936363 0.013240047  0.000000e+00     1 FALSE
2   a1_2  f1   =~  x2  0.531219363 0.015125661 3.290637e-270     1 FALSE
3   a1_3  f1   =~  x3  0.475339144 0.017630660 4.245938e-160     1 FALSE
4   a2_4  f2   =~  x4  0.473292261 0.095409266  7.025659e-07     1 FALSE
5   a2_5  f2   =~  x5  0.494141161 0.104104201  2.068629e-06     1 FALSE
6   b1_2  x1   ~>  x2  0.273397177 0.015158042  1.008268e-72     1 FALSE
7   b1_3  x1   ~>  x3  0.018924274 0.003621019  1.730022e-07     1 FALSE
8   b1_4  x1   ~>  x4  0.196318030 0.005098022  0.000000e+00     1 FALSE
9   b1_5  x1   ~>  x5 -0.019739021 0.006603132  2.795790e-03     1 FALSE
10  b2_1  x2   ~>  x1 -0.042757504 0.007395170  7.389887e-09     1 FALSE
11  b2_3  x2   ~>  x3  0.326705128 0.013084730 1.347156e-137     1 FALSE
12  b2_4  x2   ~>  x4  0.025253002 0.005632719  7.350763e-06     1 FALSE
13  b2_5  x2   ~>  x5 -0.007135786 0.005376551  1.844408e-01     1 FALSE
14  b3_1  x3   ~>  x1  0.021289211 0.003394111  3.555303e-10     1 FALSE
15  b3_2  x3   ~>  x2 -0.012061248 0.001743783  4.622385e-12     1 FALSE
...

Variances summary
  label lhs edge rhs       est          se             p group fixed
1    s1  x1   ~~  x1 0.6327819 0.018284762 1.978248e-262     1 FALSE
2    s2  x2   ~~  x2 0.4984709 0.010647468  0.000000e+00     1 FALSE
3    s3  x3   ~~  x3 0.4297915 0.009761518  0.000000e+00     1 FALSE
4    s4  x4   ~~  x4 0.6181108 0.090345862  7.831033e-12     1 FALSE
5    s5  x5   ~~  x5 0.7095327 0.100596441  1.747753e-12     1 FALSE

Skewness summary
  label edge v1 v2 v3        est         se             p group fixed
1   sk1  ~~~ x1 x1 x1 -0.5821630 0.02052658 6.052505e-177     1 FALSE
2   sk2  ~~~ x2 x2 x2  0.3080631 0.01170619 1.249442e-152     1 FALSE
3   sk3  ~~~ x3 x3 x3 -0.3652892 0.01489235 7.308575e-133     1 FALSE
4   sk4  ~~~ x4 x4 x4 -0.2778358 0.01148039 2.176876e-129     1 FALSE
5   sk5  ~~~ x5 x5 x5  0.6611792 0.02000025 1.172452e-239     1 FALSE

Kurtosis summary
  label edge v1 v2 v3 v4       est         se             p group fixed
1    k1 ~~~~ x1 x1 x1 x1 2.0276930 0.09885136  1.663583e-93     1 FALSE
2    k2 ~~~~ x2 x2 x2 x2 0.9136878 0.04126246 1.209911e-108     1 FALSE
3    k3 ~~~~ x3 x3 x3 x3 1.0338634 0.03946062 2.666126e-151     1 FALSE
4    k4 ~~~~ x4 x4 x4 x4 1.2641115 0.33327753  1.488564e-04     1 FALSE
5    k5 ~~~~ x5 x5 x5 x5 2.6777732 0.42884383  4.260600e-10     1 FALSE
```

These matrices are capped at 15 rows purely to prevent flooding the console when printing. You can obtain the full matrices as dataframes by running the following
``` 
parameters_df <- as.data.frame(result_summary, estimates='parameters')
variances_df <- as.data.frame(result_summary, estimates='variances')
skewness_df <- as.data.frame(result_summary, estimates='skewness')
kurtosis_df <- as.data.frame(result_summary, estimates='kurtosis')
```

The loss, chisq and bic can be obtained via `result_summary$loss`, `result_summary$chisq` and `result_summary$bic`. Note that this loss value does not include bound scaling. 